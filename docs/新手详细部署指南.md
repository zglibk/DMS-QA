# DMS-QA æ–°æ‰‹è¯¦ç»†éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ä¸“ä¸ºæ–°æ‰‹ç”¨æˆ·ç¼–å†™ï¼Œæä¾›è¯¦ç»†çš„æ­¥éª¤è¯´æ˜å’Œè·¯å¾„æŒ‡å¼•ã€‚

## ğŸ¯ éƒ¨ç½²æ¶æ„

```
æœåŠ¡å™¨ 192.168.1.57 ç›®å½•ç»“æ„ï¼š
D:\WebServer\
â”œâ”€â”€ nginx-1.22.1\              # Nginx ç¨‹åº
â”‚   â”œâ”€â”€ nginx.exe
â”‚   â””â”€â”€ conf\nginx.conf         # â† é…ç½®æ–‡ä»¶æ”¾è¿™é‡Œ
â”œâ”€â”€ www\dms-qa\                 # â† å‰ç«¯æ–‡ä»¶æ”¾è¿™é‡Œ
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ assets\
â”œâ”€â”€ backend\                    # â† åç«¯æ–‡ä»¶æ”¾è¿™é‡Œ
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ routes\
â””â”€â”€ logs\                       # æ—¥å¿—ç›®å½•
```

## ğŸš€ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: å‡†å¤‡ Nginx

#### 1.1 ä¸‹è½½ Nginx
```cmd
# åœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šä¸‹è½½
# ä¸‹è½½åœ°å€: http://nginx.org/download/nginx-1.22.1.zip
# æ–‡ä»¶å¤§å°: çº¦ 1.5 MB
```

#### 1.2 å®‰è£… Nginx
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ

# 1. åˆ›å»ºç›®å½•
mkdir D:\WebServer

# 2. å°† nginx-1.22.1.zip è§£å‹åˆ° D:\WebServer\
# è§£å‹ååº”è¯¥æœ‰: D:\WebServer\nginx-1.22.1\nginx.exe

# 3. éªŒè¯å®‰è£…
dir D:\WebServer\nginx-1.22.1\nginx.exe
```

### æ­¥éª¤2: éƒ¨ç½²å‰ç«¯æ–‡ä»¶

#### 2.1 ç¼–è¯‘å‰ç«¯ (åœ¨å¼€å‘æœºå™¨ä¸Š)
```cmd
# åœ¨ E:\WebProject\DMS-QA\ ç›®å½•ä¸‹æ‰§è¡Œ
npm run build

# ç¼–è¯‘åä¼šç”Ÿæˆ frontend\dist\ ç›®å½•
```

#### 2.2 å¤åˆ¶å‰ç«¯æ–‡ä»¶åˆ°æœåŠ¡å™¨
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ

# 1. åˆ›å»ºç½‘ç«™ç›®å½•
mkdir D:\WebServer\www
mkdir D:\WebServer\www\dms-qa

# 2. å¤åˆ¶å‰ç«¯æ–‡ä»¶ (é€šè¿‡ Uç›˜ã€ç½‘ç»œå…±äº«ç­‰æ–¹å¼)
# å°† frontend\dist\ ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°:
# D:\WebServer\www\dms-qa\

# 3. éªŒè¯å‰ç«¯æ–‡ä»¶
dir D:\WebServer\www\dms-qa\index.html
dir D:\WebServer\www\dms-qa\assets\
```

### æ­¥éª¤3: éƒ¨ç½²åç«¯æ–‡ä»¶

#### 3.1 å¤åˆ¶åç«¯æ–‡ä»¶åˆ°æœåŠ¡å™¨
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ

# 1. åˆ›å»ºåç«¯ç›®å½•
mkdir D:\WebServer\backend

# 2. å¤åˆ¶åç«¯æ–‡ä»¶ (é€šè¿‡ Uç›˜ã€ç½‘ç»œå…±äº«ç­‰æ–¹å¼)
# å°† server\ ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°:
# D:\WebServer\backend\

# éœ€è¦å¤åˆ¶çš„æ–‡ä»¶åŒ…æ‹¬:
# - app.js (ä¸»ç¨‹åº)
# - package.json (ä¾èµ–é…ç½®)
# - routes\ (è·¯ç”±æ–‡ä»¶å¤¹)
# - config\ (é…ç½®æ–‡ä»¶å¤¹)
# - scripts\ (è„šæœ¬æ–‡ä»¶å¤¹)
# - å…¶ä»–æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹

# 3. éªŒè¯åç«¯æ–‡ä»¶
dir D:\WebServer\backend\app.js
dir D:\WebServer\backend\package.json
dir D:\WebServer\backend\routes\
```

### æ­¥éª¤4: é…ç½® Nginx

#### 4.1 å¤åˆ¶é…ç½®æ–‡ä»¶
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ

# 1. å¤‡ä»½åŸé…ç½®æ–‡ä»¶
copy "D:\WebServer\nginx-1.22.1\conf\nginx.conf" "D:\WebServer\nginx-1.22.1\conf\nginx.conf.backup"

# 2. å¤åˆ¶æ–°é…ç½®æ–‡ä»¶
# å°† server\config\nginx-dms-qa.conf å¤åˆ¶åˆ°æœåŠ¡å™¨ï¼Œç„¶åæ‰§è¡Œ:
copy "nginx-dms-qa.conf" "D:\WebServer\nginx-1.22.1\conf\nginx.conf"

# 3. æµ‹è¯•é…ç½®æ–‡ä»¶
cd D:\WebServer\nginx-1.22.1
nginx.exe -t

# å¦‚æœæ˜¾ç¤º "test is successful" è¯´æ˜é…ç½®æ­£ç¡®
```

### æ­¥éª¤5: å¯åŠ¨æœåŠ¡

#### 5.1 å¯åŠ¨ Nginx
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ

# 1. åˆ‡æ¢åˆ° Nginx ç›®å½•
cd D:\WebServer\nginx-1.22.1

# 2. å¯åŠ¨ Nginx
nginx.exe

# 3. éªŒè¯ Nginx å¯åŠ¨
tasklist | findstr nginx

# 4. æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -an | findstr :80
```

#### 5.2 å¯åŠ¨åç«¯æœåŠ¡
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ

# 1. åˆ‡æ¢åˆ°åç«¯ç›®å½•
cd D:\WebServer\backend

# 2. å¯åŠ¨åç«¯æœåŠ¡
node app.js

# 3. éªŒè¯åç«¯å¯åŠ¨ (å¦å¼€ä¸€ä¸ª CMD çª—å£)
tasklist | findstr node
netstat -an | findstr :3001
```

### æ­¥éª¤6: é…ç½®é˜²ç«å¢™

#### 6.1 å¼€æ”¾å¿…è¦ç«¯å£
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ“ä½œ (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ CMD)

# å¼€æ”¾ HTTP ç«¯å£ 80
netsh advfirewall firewall add rule name="DMS-QA HTTP" dir=in action=allow protocol=TCP localport=80

# å¼€æ”¾æ–‡ä»¶æœåŠ¡ç«¯å£ 8080
netsh advfirewall firewall add rule name="DMS-QA Files" dir=in action=allow protocol=TCP localport=8080

# éªŒè¯é˜²ç«å¢™è§„åˆ™
netsh advfirewall firewall show rule name="DMS-QA HTTP"
```

### æ­¥éª¤7: éªŒè¯éƒ¨ç½²

#### 7.1 è®¿é—®æµ‹è¯•
```cmd
# åœ¨æœåŠ¡å™¨æˆ–å…¶ä»–å±€åŸŸç½‘æœºå™¨ä¸Šæµ‹è¯•

# 1. å‰ç«¯é¡µé¢
# æµè§ˆå™¨è®¿é—®: http://192.168.1.57/

# 2. åç«¯ API
# æµè§ˆå™¨è®¿é—®: http://192.168.1.57/api/test-connection

# 3. æ–‡ä»¶æœåŠ¡
# æµè§ˆå™¨è®¿é—®: http://192.168.1.57:8080/files/
```

#### 7.2 çŠ¶æ€æ£€æŸ¥
```cmd
# åœ¨æœåŠ¡å™¨ä¸Šæ£€æŸ¥æœåŠ¡çŠ¶æ€

# æ£€æŸ¥è¿›ç¨‹
tasklist | findstr nginx
tasklist | findstr node

# æ£€æŸ¥ç«¯å£
netstat -an | findstr :80
netstat -an | findstr :3001
netstat -an | findstr :8080
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: deploy-nginx.bat æ— ååº”

**åŸå› **: è„šæœ¬è·¯å¾„é”™è¯¯æˆ–æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```cmd
# 1. æ£€æŸ¥è„šæœ¬æ˜¯å¦å­˜åœ¨
dir E:\WebProject\DMS-QA\scripts\deploy-nginx.bat

# 2. æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬
cd E:\WebProject\DMS-QA\scripts
deploy-nginx.bat

# 3. å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ‰‹åŠ¨æ­¥éª¤æ“ä½œ
```

### é—®é¢˜2: nginx.exe -t æŠ¥é”™

**åŸå› **: é…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```cmd
# 1. æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¤åˆ¶
dir D:\WebServer\nginx-1.22.1\conf\nginx.conf

# 2. æ¢å¤å¤‡ä»½é…ç½®
copy "D:\WebServer\nginx-1.22.1\conf\nginx.conf.backup" "D:\WebServer\nginx-1.22.1\conf\nginx.conf"

# 3. é‡æ–°å¤åˆ¶æ­£ç¡®çš„é…ç½®æ–‡ä»¶
```

### é—®é¢˜3: ç½‘é¡µæ— æ³•è®¿é—®

**åŸå› **: æœåŠ¡æœªå¯åŠ¨æˆ–é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ¡ˆ**:
```cmd
# 1. æ£€æŸ¥ Nginx æ˜¯å¦è¿è¡Œ
tasklist | findstr nginx

# 2. å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨ Nginx
cd D:\WebServer\nginx-1.22.1
nginx.exe

# 3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
netsh advfirewall firewall show rule name="DMS-QA HTTP"

# 4. ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯• (ä¸æ¨èé•¿æœŸä½¿ç”¨)
netsh advfirewall set allprofiles state off
```

### é—®é¢˜4: åç«¯ API æ— æ³•è®¿é—®

**åŸå› **: åç«¯æœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**:
```cmd
# 1. æ£€æŸ¥ Node.js è¿›ç¨‹
tasklist | findstr node

# 2. å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨åç«¯
cd D:\WebServer\backend
node app.js

# 3. æ£€æŸ¥åç«¯ç«¯å£
netstat -an | findstr :3001
```

## ğŸ“ æ–‡ä»¶ä¼ è¾“æ–¹å¼

### æ–¹å¼1: Uç›˜ä¼ è¾“
```cmd
# 1. åœ¨å¼€å‘æœºå™¨ä¸Šå‡†å¤‡æ–‡ä»¶
# 2. å¤åˆ¶åˆ° Uç›˜
# 3. åœ¨æœåŠ¡å™¨ä¸Šä» Uç›˜å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®
```

### æ–¹å¼2: ç½‘ç»œå…±äº«
```cmd
# 1. åœ¨å¼€å‘æœºå™¨ä¸Šè®¾ç½®å…±äº«æ–‡ä»¶å¤¹
# 2. åœ¨æœåŠ¡å™¨ä¸Šè®¿é—®å…±äº«æ–‡ä»¶å¤¹
# 3. å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡ä½ç½®
```

### æ–¹å¼3: è¿œç¨‹æ¡Œé¢
```cmd
# 1. é€šè¿‡è¿œç¨‹æ¡Œé¢è¿æ¥åˆ°æœåŠ¡å™¨
# 2. ä½¿ç”¨å‰ªè´´æ¿æˆ–æœ¬åœ°é©±åŠ¨å™¨æ˜ å°„ä¼ è¾“æ–‡ä»¶
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥ï¼š

1. **æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®**
2. **æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨**
3. **æ£€æŸ¥é˜²ç«å¢™è®¾ç½®**
4. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**
5. **é‡å¯æœåŠ¡å™¨åé‡æ–°æµ‹è¯•**

**é‡è¦æé†’**: 
- æ‰€æœ‰æ“ä½œéƒ½åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šè¿›è¡Œ
- éœ€è¦ç®¡ç†å‘˜æƒé™çš„æ“ä½œè¯·å³é”®"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"
- ä¿æŒå¼€å‘æœºå™¨å’ŒæœåŠ¡å™¨çš„æ–‡ä»¶åŒæ­¥
