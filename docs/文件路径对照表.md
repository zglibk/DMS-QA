# DMS-QA æ–‡ä»¶è·¯å¾„å¯¹ç…§è¡¨

## ğŸ“ å¼€å‘æœºå™¨ â†’ æœåŠ¡å™¨è·¯å¾„å¯¹ç…§

### å‰ç«¯æ–‡ä»¶
```
å¼€å‘æœºå™¨è·¯å¾„                              æœåŠ¡å™¨è·¯å¾„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
E:\WebProject\DMS-QA\frontend\dist\*     â†’  D:\WebServer\www\dms-qa\

å…·ä½“æ–‡ä»¶:
E:\WebProject\DMS-QA\frontend\dist\index.html     â†’  D:\WebServer\www\dms-qa\index.html
E:\WebProject\DMS-QA\frontend\dist\assets\        â†’  D:\WebServer\www\dms-qa\assets\
E:\WebProject\DMS-QA\frontend\dist\favicon.ico    â†’  D:\WebServer\www\dms-qa\favicon.ico
```

### åç«¯æ–‡ä»¶
```
å¼€å‘æœºå™¨è·¯å¾„                              æœåŠ¡å™¨è·¯å¾„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
E:\WebProject\DMS-QA\server\*            â†’  D:\WebServer\backend\

å…·ä½“æ–‡ä»¶:
E:\WebProject\DMS-QA\server\app.js                â†’  D:\WebServer\backend\app.js
E:\WebProject\DMS-QA\server\package.json          â†’  D:\WebServer\backend\package.json
E:\WebProject\DMS-QA\server\routes\               â†’  D:\WebServer\backend\routes\
E:\WebProject\DMS-QA\server\config\               â†’  D:\WebServer\backend\config\
E:\WebProject\DMS-QA\server\scripts\              â†’  D:\WebServer\backend\scripts\
E:\WebProject\DMS-QA\server\uploads\              â†’  D:\WebServer\backend\uploads\
```

### é…ç½®æ–‡ä»¶
```
å¼€å‘æœºå™¨è·¯å¾„                                        æœåŠ¡å™¨è·¯å¾„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
E:\WebProject\DMS-QA\server\config\nginx-dms-qa.conf  â†’  D:\WebServer\nginx-1.22.1\conf\nginx.conf
```

### ç®¡ç†è„šæœ¬
```
å¼€å‘æœºå™¨è·¯å¾„                              æœåŠ¡å™¨è·¯å¾„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
E:\WebProject\DMS-QA\scripts\*           â†’  D:\WebServer\scripts\

å…·ä½“æ–‡ä»¶:
E:\WebProject\DMS-QA\scripts\deploy-nginx.bat     â†’  D:\WebServer\scripts\deploy-nginx.bat
E:\WebProject\DMS-QA\scripts\nginx-manager.bat    â†’  D:\WebServer\scripts\nginx-manager.bat
E:\WebProject\DMS-QA\scripts\auto-guard.bat       â†’  D:\WebServer\scripts\auto-guard.bat
```

## ğŸ“‚ æœåŠ¡å™¨å®Œæ•´ç›®å½•ç»“æ„

```
D:\WebServer\
â”œâ”€â”€ nginx-1.22.1\                    # Nginx ç¨‹åºç›®å½•
â”‚   â”œâ”€â”€ nginx.exe                     # Nginx ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ conf\
â”‚   â”‚   â”œâ”€â”€ nginx.conf               # â† ä¸»é…ç½®æ–‡ä»¶ (ä» nginx-dms-qa.conf å¤åˆ¶)
â”‚   â”‚   â”œâ”€â”€ nginx.conf.backup        # åŸé…ç½®æ–‡ä»¶å¤‡ä»½
â”‚   â”‚   â””â”€â”€ mime.types               # MIME ç±»å‹é…ç½®
â”‚   â”œâ”€â”€ html\                        # é»˜è®¤ç½‘é¡µç›®å½• (ä¸ä½¿ç”¨)
â”‚   â”œâ”€â”€ logs\                        # Nginx æ—¥å¿—ç›®å½•
â”‚   â”‚   â”œâ”€â”€ access.log               # è®¿é—®æ—¥å¿—
â”‚   â”‚   â””â”€â”€ error.log                # é”™è¯¯æ—¥å¿—
â”‚   â””â”€â”€ temp\                        # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ www\                             # ç½‘ç«™æ ¹ç›®å½•
â”‚   â””â”€â”€ dms-qa\                      # â† å‰ç«¯æ–‡ä»¶ç›®å½•
â”‚       â”œâ”€â”€ index.html               # ä¸»é¡µé¢
â”‚       â”œâ”€â”€ assets\                  # é™æ€èµ„æº
â”‚       â”‚   â”œâ”€â”€ css\
â”‚       â”‚   â”œâ”€â”€ js\
â”‚       â”‚   â””â”€â”€ images\
â”‚       â””â”€â”€ favicon.ico              # ç½‘ç«™å›¾æ ‡
â”‚
â”œâ”€â”€ backend\                         # â† åç«¯æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ app.js                       # åç«¯ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ package.json                 # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ routes\                      # è·¯ç”±æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ api.js
â”‚   â”‚   â””â”€â”€ files.js
â”‚   â”œâ”€â”€ config\                      # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ database.js
â”‚   â”‚   â””â”€â”€ nginx-dms-qa.conf
â”‚   â”œâ”€â”€ scripts\                     # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ uploads\                     # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ logs\                        # åç«¯æ—¥å¿—ç›®å½•
â”‚
â”œâ”€â”€ tools\                           # å·¥å…·ç›®å½•
â”‚   â””â”€â”€ nssm-2.24\                   # NSSM æœåŠ¡ç®¡ç†å·¥å…·
â”‚       â”œâ”€â”€ win32\nssm.exe           # 32ä½ç‰ˆæœ¬
â”‚       â””â”€â”€ win64\nssm.exe           # 64ä½ç‰ˆæœ¬
â”‚
â”œâ”€â”€ scripts\                         # ç®¡ç†è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ deploy-nginx.bat             # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ nginx-manager.bat            # Nginx ç®¡ç†
â”‚   â”œâ”€â”€ auto-guard.bat               # è‡ªåŠ¨å€¼å®ˆ
â”‚   â”œâ”€â”€ system-monitor.bat           # ç³»ç»Ÿç›‘æ§
â”‚   â”œâ”€â”€ setup-auto-start.bat         # è‡ªå¯åŠ¨é…ç½®
â”‚   â””â”€â”€ log-rotate.bat               # æ—¥å¿—è½®è½¬
â”‚
â”œâ”€â”€ logs\                            # ç³»ç»Ÿæ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ auto-guard.log               # å€¼å®ˆæœåŠ¡æ—¥å¿—
â”‚   â””â”€â”€ deploy.log                   # éƒ¨ç½²æ—¥å¿—
â”‚
â””â”€â”€ backup\                          # å¤‡ä»½ç›®å½•
    â”œâ”€â”€ nginx-configs\               # é…ç½®æ–‡ä»¶å¤‡ä»½
    â””â”€â”€ website-files\               # ç½‘ç«™æ–‡ä»¶å¤‡ä»½
```

## ğŸ”„ æ–‡ä»¶å¤åˆ¶å‘½ä»¤

### å¤åˆ¶å‰ç«¯æ–‡ä»¶
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ‰§è¡Œ

# åˆ›å»ºç›®å½•
mkdir D:\WebServer\www\dms-qa

# å¤åˆ¶æ–‡ä»¶ (å‡è®¾å·²é€šè¿‡ Uç›˜ç­‰æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨)
xcopy /E /I "å‰ç«¯æ–‡ä»¶ä¸´æ—¶ä½ç½®\*" "D:\WebServer\www\dms-qa\"

# éªŒè¯å¤åˆ¶ç»“æœ
dir D:\WebServer\www\dms-qa\index.html
dir D:\WebServer\www\dms-qa\assets\
```

### å¤åˆ¶åç«¯æ–‡ä»¶
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ‰§è¡Œ

# åˆ›å»ºç›®å½•
mkdir D:\WebServer\backend

# å¤åˆ¶æ–‡ä»¶ (å‡è®¾å·²é€šè¿‡ Uç›˜ç­‰æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨)
xcopy /E /I "åç«¯æ–‡ä»¶ä¸´æ—¶ä½ç½®\*" "D:\WebServer\backend\"

# éªŒè¯å¤åˆ¶ç»“æœ
dir D:\WebServer\backend\app.js
dir D:\WebServer\backend\package.json
dir D:\WebServer\backend\routes\
```

### å¤åˆ¶é…ç½®æ–‡ä»¶
```cmd
# åœ¨æœåŠ¡å™¨ 192.168.1.57 ä¸Šæ‰§è¡Œ

# å¤‡ä»½åŸé…ç½®
copy "D:\WebServer\nginx-1.22.1\conf\nginx.conf" "D:\WebServer\nginx-1.22.1\conf\nginx.conf.backup"

# å¤åˆ¶æ–°é…ç½® (å‡è®¾ nginx-dms-qa.conf å·²ä¼ è¾“åˆ°æœåŠ¡å™¨)
copy "nginx-dms-qa.conf" "D:\WebServer\nginx-1.22.1\conf\nginx.conf"

# éªŒè¯é…ç½®
cd D:\WebServer\nginx-1.22.1
nginx.exe -t
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æ–‡ä»¶æ£€æŸ¥
- [ ] å‰ç«¯æ–‡ä»¶å·²å¤åˆ¶åˆ° `D:\WebServer\www\dms-qa\`
- [ ] åç«¯æ–‡ä»¶å·²å¤åˆ¶åˆ° `D:\WebServer\backend\`
- [ ] é…ç½®æ–‡ä»¶å·²å¤åˆ¶åˆ° `D:\WebServer\nginx-1.22.1\conf\nginx.conf`
- [ ] ç®¡ç†è„šæœ¬å·²å¤åˆ¶åˆ° `D:\WebServer\scripts\`

### ç›®å½•æ£€æŸ¥
- [ ] `D:\WebServer\nginx-1.22.1\nginx.exe` å­˜åœ¨
- [ ] `D:\WebServer\www\dms-qa\index.html` å­˜åœ¨
- [ ] `D:\WebServer\backend\app.js` å­˜åœ¨
- [ ] `D:\WebServer\nginx-1.22.1\conf\nginx.conf` å­˜åœ¨

### æƒé™æ£€æŸ¥
- [ ] æ‰€æœ‰æ–‡ä»¶å¯è¯»å¯æ‰§è¡Œ
- [ ] Nginx ç›®å½•æœ‰å†™å…¥æƒé™ (ç”¨äºæ—¥å¿—)
- [ ] åç«¯ç›®å½•æœ‰å†™å…¥æƒé™ (ç”¨äºä¸Šä¼ æ–‡ä»¶)

### æœåŠ¡æ£€æŸ¥
- [ ] Nginx é…ç½®æµ‹è¯•é€šè¿‡ (`nginx.exe -t`)
- [ ] Nginx æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] é˜²ç«å¢™è§„åˆ™å·²é…ç½®

### è®¿é—®æ£€æŸ¥
- [ ] å‰ç«¯é¡µé¢å¯è®¿é—® (`http://192.168.1.57/`)
- [ ] åç«¯ API å¯è®¿é—® (`http://192.168.1.57/api/test-connection`)
- [ ] æ–‡ä»¶æœåŠ¡å¯è®¿é—® (`http://192.168.1.57:8080/files/`)

## ğŸš¨ é‡è¦æé†’

1. **è·¯å¾„å¤§å°å†™**: Windows è·¯å¾„ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†å»ºè®®ä¿æŒä¸€è‡´
2. **æ–‡ä»¶æƒé™**: ç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰é€‚å½“çš„è¯»å†™æƒé™
3. **ç›®å½•ç»“æ„**: ä¸¥æ ¼æŒ‰ç…§å¯¹ç…§è¡¨çš„ç›®å½•ç»“æ„éƒ¨ç½²
4. **é…ç½®æ–‡ä»¶**: nginx-dms-qa.conf å¿…é¡»é‡å‘½åä¸º nginx.conf
5. **å¤‡ä»½**: éƒ¨ç½²å‰å¤‡ä»½åŸæœ‰é…ç½®æ–‡ä»¶
6. **éªŒè¯**: æ¯ä¸ªæ­¥éª¤å®Œæˆåéƒ½è¦éªŒè¯æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¤åˆ¶
