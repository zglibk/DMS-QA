# DMS-QA è´¨é‡ç®¡ç†ç³»ç»Ÿ - ç¼–è¯‘éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ç¼–è¯‘å’Œéƒ¨ç½² DMS-QA è´¨é‡ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬å‰ç«¯æ„å»ºã€åç«¯å‡†å¤‡å’Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

## ğŸ”§ ç¼–è¯‘é¡¹ç›®

### å®Œæ•´é¡¹ç›®ç¼–è¯‘

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
npm run build
```

### åˆ†åˆ«ç¼–è¯‘å‰åç«¯

```bash
# ä»…ç¼–è¯‘å‰ç«¯
npm run build:frontend

# ä»…ç¼–è¯‘åç«¯
npm run build:backend
```

## ğŸ“ ç¼–è¯‘è¾“å‡º

### å‰ç«¯ç¼–è¯‘ç»“æœ

ç¼–è¯‘åçš„å‰ç«¯æ–‡ä»¶ä½äº `frontend/dist/` ç›®å½•ï¼š

```
frontend/dist/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢æ–‡ä»¶
â”œâ”€â”€ logo.png               # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ web.config             # IISé…ç½®æ–‡ä»¶
â””â”€â”€ assets/                # é™æ€èµ„æºç›®å½•
    â”œâ”€â”€ index-*.css        # ä¸»æ ·å¼æ–‡ä»¶ (459.42 kB)
    â”œâ”€â”€ index-*.js         # ä¸»JavaScriptæ–‡ä»¶ (3.04 MB)
    â””â”€â”€ *.css/*.js         # å…¶ä»–ç»„ä»¶æ–‡ä»¶
```

### åç«¯ç¼–è¯‘ç»“æœ

åç«¯æ˜¯ Node.js é¡¹ç›®ï¼Œæ— éœ€ç¼–è¯‘ï¼Œç›´æ¥ä½¿ç”¨æºç ï¼š

```
server/
â”œâ”€â”€ app.js                 # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ package.json           # ä¾èµ–é…ç½®
â”œâ”€â”€ routes/                # è·¯ç”±æ–‡ä»¶
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â””â”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
```

## ğŸš€ éƒ¨ç½²æ–¹å¼

### 1. æœ¬åœ°éƒ¨ç½²

```bash
# å¼€å‘ç¯å¢ƒå¯åŠ¨
npm run dev

# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
npm run start:prod
```

### 2. æœåŠ¡å™¨éƒ¨ç½²

#### å‰ç«¯éƒ¨ç½²ï¼ˆé™æ€æ–‡ä»¶ï¼‰

**é€‰é¡¹1ï¼šNginx éƒ¨ç½²**
```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/frontend/dist;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

**é€‰é¡¹2ï¼šIIS éƒ¨ç½²**
- å°† `frontend/dist/` ç›®å½•å†…å®¹å¤åˆ¶åˆ° IIS ç½‘ç«™æ ¹ç›®å½•
- `web.config` æ–‡ä»¶å·²åŒ…å«åœ¨ç¼–è¯‘è¾“å‡ºä¸­

**é€‰é¡¹3ï¼šApache éƒ¨ç½²**
```apache
<VirtualHost *:80>
    DocumentRoot /path/to/frontend/dist
    ServerName your-domain.com
    
    <Directory /path/to/frontend/dist>
        AllowOverride All
        Require all granted
    </Directory>
    
    ProxyPass /api http://localhost:3001/api
    ProxyPassReverse /api http://localhost:3001/api
</VirtualHost>
```

#### åç«¯éƒ¨ç½²ï¼ˆNode.js æœåŠ¡ï¼‰

**é€‰é¡¹1ï¼šPM2 éƒ¨ç½²**
```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
cd server
pm2 start app.js --name dms-qa-backend

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs dms-qa-backend
```

**é€‰é¡¹2ï¼šDocker éƒ¨ç½²**
```dockerfile
# Dockerfile
FROM node:16-alpine
WORKDIR /app
COPY server/ .
RUN npm install --production
EXPOSE 3001
CMD ["node", "app.js"]
```

**é€‰é¡¹3ï¼šWindows æœåŠ¡**
```bash
# ä½¿ç”¨ node-windows
npm install -g node-windows
node install-service.js
```

## âš™ï¸ ç¯å¢ƒé…ç½®

### ç”Ÿäº§ç¯å¢ƒé…ç½®

**åç«¯ç¯å¢ƒå˜é‡ (server/.env)**
```bash
NODE_ENV=production
DB_SERVER=your-production-db-server
DB_NAME=DMS-QA
DB_USER=your-db-user
DB_PASSWORD=your-secure-password
FILE_SERVER_IP=your-file-server-ip
FILE_SERVER_PORT=8080
PORT=3001
JWT_SECRET=your-very-long-random-jwt-secret
SESSION_SECRET=your-very-long-random-session-secret
```

**å‰ç«¯ç¯å¢ƒå˜é‡ (frontend/.env.production)**
```bash
VITE_API_BASE_URL=http://your-production-server:3001
VITE_APP_TITLE=DMS-QA è´¨é‡ç®¡ç†ç³»ç»Ÿ
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**ï¼šå·²å¯ç”¨åŠ¨æ€å¯¼å…¥
2. **èµ„æºå‹ç¼©**ï¼šGzip å‹ç¼©ç‡çº¦ 70%
3. **ç¼“å­˜ç­–ç•¥**ï¼šé™æ€èµ„æºå¸¦ç‰ˆæœ¬å·

### åç«¯ä¼˜åŒ–

1. **è¿›ç¨‹ç®¡ç†**ï¼šä½¿ç”¨ PM2 é›†ç¾¤æ¨¡å¼
2. **æ•°æ®åº“è¿æ¥æ± **ï¼šå·²é…ç½®è¿æ¥æ± 
3. **æ—¥å¿—ç®¡ç†**ï¼šç”Ÿäº§ç¯å¢ƒæ—¥å¿—è½®è½¬

## ğŸ”’ å®‰å…¨é…ç½®

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ£€æŸ¥

- [ ] ä¿®æ”¹é»˜è®¤æ•°æ®åº“å¯†ç 
- [ ] è®¾ç½®å¼º JWT å¯†é’¥
- [ ] é…ç½® HTTPS
- [ ] è®¾ç½®é˜²ç«å¢™è§„åˆ™
- [ ] å¯ç”¨è®¿é—®æ—¥å¿—
- [ ] é…ç½®å¤‡ä»½ç­–ç•¥

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥

- [ ] ç¼–è¯‘æˆåŠŸæ— é”™è¯¯
- [ ] ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] æ–‡ä»¶æœåŠ¡å™¨å¯è®¿é—®
- [ ] é˜²ç«å¢™ç«¯å£å¼€æ”¾

### éƒ¨ç½²åéªŒè¯

- [ ] å‰ç«¯é¡µé¢æ­£å¸¸åŠ è½½
- [ ] ç”¨æˆ·ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] API æ¥å£å“åº”æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ­£å¸¸
- [ ] æ•°æ®æŸ¥è¯¢æ˜¾ç¤ºæ­£å¸¸

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### å‰ç«¯æ›´æ–°

```bash
# é‡æ–°ç¼–è¯‘
npm run build:frontend

# æ›¿æ¢é™æ€æ–‡ä»¶
cp -r frontend/dist/* /path/to/web/root/
```

### åç«¯æ›´æ–°

```bash
# åœæ­¢æœåŠ¡
pm2 stop dms-qa-backend

# æ›´æ–°ä»£ç 
cp -r server/* /path/to/backend/

# é‡å¯æœåŠ¡
pm2 start dms-qa-backend
```

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å‰ç«¯ç™½å±**
   - æ£€æŸ¥ API åœ°å€é…ç½®
   - æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

2. **åç«¯è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
   - éªŒè¯é˜²ç«å¢™è®¾ç½®

3. **æ–‡ä»¶è®¿é—®å¤±è´¥**
   - æ£€æŸ¥æ–‡ä»¶æœåŠ¡å™¨é…ç½®
   - éªŒè¯è·¯å¾„æ˜ å°„è®¾ç½®

### æ—¥å¿—æŸ¥çœ‹

```bash
# PM2 æ—¥å¿—
pm2 logs dms-qa-backend

# åº”ç”¨æ—¥å¿—
tail -f server/debug.log

# Nginx æ—¥å¿—
tail -f /var/log/nginx/access.log
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç¼–è¯‘è¾“å‡ºæ˜¯å¦å®Œæ•´
2. ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. æœåŠ¡ç«¯å£æ˜¯å¦å¼€æ”¾
5. æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯
