# Vue Router è·¯ç”±æ¨¡å¼åˆ‡æ¢æŒ‡å—

## ğŸ¯ é—®é¢˜è¯´æ˜

å¦‚æœæ— æ³•åœ¨IISä¸Šå®‰è£…URLé‡å†™æ¨¡å—ï¼Œå¯ä»¥å°†Vue Routerä»Historyæ¨¡å¼åˆ‡æ¢åˆ°Hashæ¨¡å¼æ¥è§£å†³404é—®é¢˜ã€‚

## ğŸ”„ åˆ‡æ¢æ­¥éª¤

### æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹è·¯ç”±é…ç½®ï¼ˆæ¨èï¼‰

ç¼–è¾‘ `frontend/src/router/index.js` æ–‡ä»¶ï¼š

```javascript
// æ‰¾åˆ° createRouter é…ç½®
const router = createRouter({
  // å°† history æ¨¡å¼æ”¹ä¸º hash æ¨¡å¼
  // history: createWebHistory(import.meta.env.BASE_URL), // æ³¨é‡Šæ‰è¿™è¡Œ
  history: createWebHashHistory(import.meta.env.BASE_URL), // æ·»åŠ è¿™è¡Œ
  routes
})
```

### æ–¹æ¡ˆäºŒï¼šæ¡ä»¶æ€§è·¯ç”±æ¨¡å¼

```javascript
import { createRouter, createWebHistory, createWebHashHistory } from 'vue-router'

// æ ¹æ®ç¯å¢ƒè‡ªåŠ¨é€‰æ‹©è·¯ç”±æ¨¡å¼
const isProduction = import.meta.env.PROD
const useHashMode = true // è®¾ç½®ä¸º true ä½¿ç”¨ Hash æ¨¡å¼

const router = createRouter({
  history: useHashMode 
    ? createWebHashHistory(import.meta.env.BASE_URL)
    : createWebHistory(import.meta.env.BASE_URL),
  routes
})
```

## ğŸ“‹ ä¸¤ç§æ¨¡å¼å¯¹æ¯”

### History æ¨¡å¼
- âœ… URLç¾è§‚ï¼š`/login`, `/admin/dashboard`
- âŒ éœ€è¦æœåŠ¡å™¨é…ç½®æ”¯æŒ
- âŒ ç›´æ¥è®¿é—®è·¯ç”±ä¼š404ï¼ˆæ— URLé‡å†™æ—¶ï¼‰

### Hash æ¨¡å¼  
- âœ… æ— éœ€æœåŠ¡å™¨é…ç½®
- âœ… å…¼å®¹æ€§å¥½
- âŒ URLåŒ…å«#ï¼š`/#/login`, `/#/admin/dashboard`

## ğŸ› ï¸ ä¿®æ”¹åçš„æ“ä½œ

1. **ä¿®æ”¹è·¯ç”±é…ç½®**
2. **é‡æ–°ç¼–è¯‘å‰ç«¯**ï¼š
   ```bash
   cd frontend
   npm run build
   ```
3. **éƒ¨ç½²æ–°çš„distæ–‡ä»¶**åˆ°IIS
4. **ä½¿ç”¨ç®€åŒ–çš„web.config**ï¼ˆä¸éœ€è¦URLé‡å†™è§„åˆ™ï¼‰

## ğŸ”§ ç®€åŒ–çš„web.config

å¦‚æœä½¿ç”¨Hashæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€å•çš„é…ç½®ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <defaultDocument>
      <files>
        <clear />
        <add value="index.html" />
      </files>
    </defaultDocument>
    <directoryBrowse enabled="false" />
    <staticContent>
      <mimeMap fileExtension=".json" mimeType="application/json" />
      <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
      <mimeMap fileExtension=".woff2" mimeType="font/woff2" />
    </staticContent>
  </system.webServer>
</configuration>
```

## âœ… éªŒè¯éƒ¨ç½²

Hashæ¨¡å¼ä¸‹çš„URLç¤ºä¾‹ï¼š
- é¦–é¡µï¼š`http://your-server/`
- ç™»å½•ï¼š`http://your-server/#/login`
- ä»ªè¡¨ç›˜ï¼š`http://your-server/#/admin/dashboard`

## ğŸ¯ æ¨èæ–¹æ¡ˆ

1. **ä¼˜å…ˆå°è¯•**ï¼šå®‰è£…URLé‡å†™æ¨¡å— + Historyæ¨¡å¼
2. **å¤‡ç”¨æ–¹æ¡ˆ**ï¼šHashæ¨¡å¼ï¼ˆå¦‚æœæ— æ³•å®‰è£…URLé‡å†™æ¨¡å—ï¼‰

é€‰æ‹©å“ªç§æ–¹æ¡ˆå–å†³äºæ‚¨çš„æœåŠ¡å™¨ç¯å¢ƒå’ŒURLç¾è§‚åº¦è¦æ±‚ã€‚
