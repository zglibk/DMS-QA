# DMS-QA å¿«é€Ÿéƒ¨ç½²æŒ‡å— - 192.168.1.57

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### å‰ç½®æ¡ä»¶
- [x] æœåŠ¡å™¨ 192.168.1.57 å¯è®¿é—®
- [x] å…·æœ‰ç®¡ç†å‘˜æƒé™
- [x] é¡¹ç›®å·²ç¼–è¯‘å®Œæˆ (`npm run build`)

### æ­¥éª¤1: å‡†å¤‡ Nginx (2åˆ†é’Ÿ)

**åœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šä¸‹è½½**ï¼š
```
# ç¨³å®šç‰ˆ (æ¨è)
http://nginx.org/download/nginx-1.22.1.zip

# æˆ–æœ€æ–°ç‰ˆ
http://nginx.org/download/nginx-1.24.0.zip
```

**åœ¨ 192.168.1.57 ä¸Šæ“ä½œ**ï¼š
```cmd
# 1. åˆ›å»ºç›®å½•
mkdir D:\WebServer
cd D:\WebServer

# 2. è§£å‹ Nginx
# å°†ä¸‹è½½çš„ nginx-1.22.1.zip è§£å‹åˆ° D:\WebServer\ ç›®å½•
# ç¡®ä¿è§£å‹åçš„ç›®å½•ç»“æ„ä¸º: D:\WebServer\nginx-1.22.1\

# 3. éªŒè¯è§£å‹ç»“æœ
dir D:\WebServer\nginx-1.22.1\nginx.exe
dir D:\WebServer\nginx-1.22.1\conf\nginx.conf

# 4. æµ‹è¯• Nginx å¯æ‰§è¡Œæ€§
cd /d D:\WebServer\nginx-1.22.1
nginx.exe -v

# å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜è§£å‹æˆåŠŸ
```

**é‡è¦æç¤º**ï¼š
- å¿…é¡»ç¡®ä¿ç›®å½•åä¸º `nginx-1.22.1`
- `nginx.exe` æ–‡ä»¶å¿…é¡»å­˜åœ¨
- æ‰€æœ‰ Nginx å‘½ä»¤éƒ½å¿…é¡»åœ¨å…¶ç›®å½•ä¸‹æ‰§è¡Œæˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„

### æ­¥éª¤2: è‡ªåŠ¨éƒ¨ç½² (2åˆ†é’Ÿ)

**å¤åˆ¶éƒ¨ç½²è„šæœ¬åˆ°æœåŠ¡å™¨**ï¼š
```cmd
# å°†ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ° 192.168.1.57
E:\WebProject\DMS-QA\scripts\deploy-nginx.bat
E:\WebProject\DMS-QA\server\config\nginx-dms-qa.conf
```

**è¿è¡Œè‡ªåŠ¨éƒ¨ç½²**ï¼š
```cmd
# å³é”® "ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"
deploy-nginx.bat
```

### æ­¥éª¤3: éªŒè¯éƒ¨ç½² (1åˆ†é’Ÿ)

**è®¿é—®æµ‹è¯•**ï¼š
- å‰ç«¯é¡µé¢: http://192.168.1.57/
- æ–‡ä»¶æœåŠ¡: http://192.168.1.57:8080/files/

**çŠ¶æ€æ£€æŸ¥**ï¼š
```cmd
# æ£€æŸ¥ Nginx è¿›ç¨‹
tasklist | findstr nginx

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -an | findstr :80
netstat -an | findstr :8080
```

## ğŸ“‹ æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

### å¦‚æœè‡ªåŠ¨éƒ¨ç½²å¤±è´¥ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨æ“ä½œï¼š

#### 1. éƒ¨ç½²å‰ç«¯æ–‡ä»¶
```cmd
# åˆ›å»ºç½‘ç«™ç›®å½•
mkdir D:\WebServer\www\dms-qa

# å¤åˆ¶å‰ç«¯æ–‡ä»¶
xcopy /E /I "E:\WebProject\DMS-QA\frontend\dist\*" "D:\WebServer\www\dms-qa\"
```

#### 2. é…ç½® Nginx
```cmd
# å¤åˆ¶é…ç½®æ–‡ä»¶
copy "E:\WebProject\DMS-QA\server\config\nginx-dms-qa.conf" "D:\WebServer\nginx-1.22.1\conf\nginx.conf"

# æµ‹è¯•é…ç½®
cd D:\WebServer\nginx-1.22.1
nginx.exe -t
```

#### 3. å¯åŠ¨æœåŠ¡
```cmd
# åˆ‡æ¢åˆ° Nginx ç›®å½• (é‡è¦!)
cd /d D:\WebServer\nginx-1.22.1

# æµ‹è¯•é…ç½®æ–‡ä»¶
nginx.exe -t

# å¯åŠ¨ Nginx
nginx.exe

# éªŒè¯å¯åŠ¨æˆåŠŸ
tasklist | findstr nginx

# é…ç½®é˜²ç«å¢™
netsh advfirewall firewall add rule name="DMS-QA HTTP" dir=in action=allow protocol=TCP localport=80
netsh advfirewall firewall add rule name="DMS-QA Files" dir=in action=allow protocol=TCP localport=8080
```

## ğŸ”§ ç®¡ç†å‘½ä»¤

### æ—¥å¸¸ç®¡ç†

**æ–¹æ³•1: åˆ‡æ¢ç›®å½•åæ‰§è¡Œ**
```cmd
# è¿›å…¥ Nginx ç›®å½• (å¿…é¡»!)
cd /d D:\WebServer\nginx-1.22.1

# å¯åŠ¨æœåŠ¡
nginx.exe

# åœæ­¢æœåŠ¡
nginx.exe -s stop

# é‡æ–°åŠ è½½é…ç½®
nginx.exe -s reload

# æµ‹è¯•é…ç½®
nginx.exe -t
```

**æ–¹æ³•2: ä½¿ç”¨å®Œæ•´è·¯å¾„ (æ¨è)**
```cmd
# å¯åŠ¨æœåŠ¡
"D:\WebServer\nginx-1.22.1\nginx.exe"

# åœæ­¢æœåŠ¡
"D:\WebServer\nginx-1.22.1\nginx.exe" -s stop

# é‡æ–°åŠ è½½é…ç½®
"D:\WebServer\nginx-1.22.1\nginx.exe" -s reload

# æµ‹è¯•é…ç½®
"D:\WebServer\nginx-1.22.1\nginx.exe" -t
```

### ä½¿ç”¨ç®¡ç†å·¥å…·
```cmd
# è¿è¡Œç®¡ç†è„šæœ¬
E:\WebProject\DMS-QA\scripts\nginx-manager.bat
```

## ğŸ“Š è®¿é—®åœ°å€

### ç”¨æˆ·è®¿é—®
- **ä¸»é¡µ**: http://192.168.1.57/
- **ç™»å½•é¡µ**: http://192.168.1.57/login
- **ç®¡ç†åå°**: http://192.168.1.57/admin

### å¼€å‘è°ƒè¯•
- **API æµ‹è¯•**: http://192.168.1.57/api/test-connection
- **æ–‡ä»¶æœåŠ¡**: http://192.168.1.57:8080/files/
- **Nginx çŠ¶æ€**: http://192.168.1.57/nginx_status

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. Nginx å¯åŠ¨å¤±è´¥**
```cmd
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -an | findstr :80

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
type D:\WebServer\nginx-1.24.0\logs\error.log

# æµ‹è¯•é…ç½®æ–‡ä»¶
nginx.exe -t
```

**2. é¡µé¢æ— æ³•è®¿é—®**
```cmd
# æ£€æŸ¥é˜²ç«å¢™
netsh advfirewall firewall show rule name="DMS-QA HTTP"

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
dir D:\WebServer\www\dms-qa\index.html

# æ£€æŸ¥ Nginx è¿›ç¨‹
tasklist | findstr nginx
```

**3. API æ¥å£å¤±è´¥**
```cmd
# æ£€æŸ¥åç«¯æœåŠ¡
cd E:\WebProject\DMS-QA\server
node app.js

# æµ‹è¯•åç«¯è¿æ¥
curl http://localhost:3001/api/test-connection
```

### æ—¥å¿—æŸ¥çœ‹
```cmd
# è®¿é—®æ—¥å¿—
type D:\WebServer\nginx-1.24.0\logs\access.log

# é”™è¯¯æ—¥å¿—
type D:\WebServer\nginx-1.24.0\logs\error.log

# å®æ—¶ç›‘æ§æ—¥å¿—
powershell "Get-Content D:\WebServer\nginx-1.24.0\logs\access.log -Wait"
```

## ğŸ“ ç›®å½•ç»“æ„

### éƒ¨ç½²åçš„ç›®å½•ç»“æ„
```
D:\WebServer\
â”œâ”€â”€ nginx-1.24.0\              # Nginx ç¨‹åºç›®å½•
â”‚   â”œâ”€â”€ nginx.exe              # ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ conf\nginx.conf        # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ logs\                  # æ—¥å¿—ç›®å½•
â”œâ”€â”€ www\dms-qa\                # ç½‘ç«™æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ index.html             # å‰ç«¯ä¸»é¡µ
â”‚   â””â”€â”€ assets\                # é™æ€èµ„æº
â””â”€â”€ backup\                    # å¤‡ä»½ç›®å½•
```

## ğŸ”’ å®‰å…¨é…ç½®

### åŸºç¡€å®‰å…¨
- [x] é˜²ç«å¢™è§„åˆ™å·²é…ç½®
- [x] è®¿é—®æ—¥å¿—å·²å¯ç”¨
- [x] é”™è¯¯é¡µé¢å·²è®¾ç½®
- [x] æ•æ„Ÿæ–‡ä»¶å·²éšè—

### é«˜çº§å®‰å…¨ (å¯é€‰)
```nginx
# åœ¨ nginx.conf ä¸­æ·»åŠ 
# IP è®¿é—®é™åˆ¶
allow 192.168.1.0/24;
deny all;

# è¯·æ±‚é¢‘ç‡é™åˆ¶
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;
limit_req zone=one burst=5;
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- æŠ€æœ¯æ–‡æ¡£: `docs/å±€åŸŸç½‘Nginxéƒ¨ç½²æ–¹æ¡ˆ.md`
- ç®¡ç†å·¥å…·: `scripts/nginx-manager.bat`
- é…ç½®æ–‡ä»¶: `server/config/nginx-dms-qa.conf`

### åœ¨çº¿èµ„æº
- Nginx å®˜æ–¹æ–‡æ¡£: http://nginx.org/en/docs/
- Windows ç‰ˆæœ¬è¯´æ˜: http://nginx.org/en/docs/windows.html

---

## âœ… éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] Nginx æœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] å‰ç«¯é¡µé¢å¯æ­£å¸¸è®¿é—®
- [ ] API æ¥å£å“åº”æ­£å¸¸
- [ ] æ–‡ä»¶æœåŠ¡å¯æ­£å¸¸è®¿é—®
- [ ] é˜²ç«å¢™è§„åˆ™å·²é…ç½®
- [ ] æ—¥å¿—æ–‡ä»¶æ­£å¸¸ç”Ÿæˆ
- [ ] ç®¡ç†å·¥å…·å¯æ­£å¸¸ä½¿ç”¨

**éƒ¨ç½²å®Œæˆåï¼ŒDMS-QA è´¨é‡ç®¡ç†ç³»ç»Ÿå°†é€šè¿‡ http://192.168.1.57/ è®¿é—®ï¼** ğŸ‰
