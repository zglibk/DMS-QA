# 实验报告表头动态配置化方案 (含控件类型)

为了解决报告表头字段不一致问题，并提升录入体验，我将实施支持**自定义控件类型**的配置方案：

## 1. 配置存储方案
利用 `PerformanceConfigs` 表存储 `ItemCode = 'ReportHeader'` 的特殊配置。
- **配置结构增强**：
  ```json
  [
    { 
      "key": "Supplier", 
      "label": "供应商", 
      "type": "select",  // 新增：支持 text, date, select
      "options": ["供应商A", "供应商B"], // 新增：下拉选项
      "visible": true,
      "readonly": false
    }
  ]
  ```

## 2. 前端配置管理 (`PerformanceConfigDialog.vue`)
- **新增"表头配置"入口**：在弹窗顶部增加按钮。
- **编辑器功能升级**：
    - **字段列表**：显示 Key、Label、控件类型。
    - **属性编辑**：
        - **Label**: 可修改显示名称。
        - **控件类型**: 下拉选择 `文本框`, `日期选择`, `下拉框`。
        - **选项配置**: 当类型为`下拉框`时，提供输入框允许用户输入选项（逗号分隔或标签输入）。
        - **排序与显示**: 拖拽排序，开关控制可见性。

## 3. 动态渲染实现

### A. 基础信息表单 (`BasicInfoForm.vue`)
- **智能渲染组件**：
    - `type === 'date'`: 渲染 `<el-date-picker>`。
    - `type === 'select'`: 渲染 `<el-select>` 并加载配置的 `options`。
    - 其他: 渲染 `<el-input>`。
- **保持核心约束**：`ReportNo` 强制只读，`TestDate` 默认日期类型但允许修改 Label。

### B. 打印预览 (`ReportPreview.vue`)
- **动态排版**：
    - 读取配置中的 `label` 作为表头。
    - 读取配置中的 `key` 获取数据值。
    - 维持 **3列布局** 算法，自动计算行数并填充空缺。

## 4. 初始化策略
- 系统首次运行时，自动检查并生成一份**默认配置**，包含现有的 8 个标准字段（报告编号、日期、客户、样品、型号、批次、供应商、规格），默认均为文本框（日期除外）。

此方案不仅统一了展示，还允许管理员通过配置下拉选项来规范录入数据。
